<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>

    <nav class=" navbar  bg-dark " style="height: 50px;">
        <p  style="color: white;">AJAX</p>

    </nav>

    <div class="container text-center mt-3">
        <button id="btn-txt2" class=" btn btn-primary">JSON</button>
        <button id="btn-txt3" class=" btn btn-warning"> API DATA</button>
    </div>

    <!-- card -->
<div class="d-flex justify-content-evenly m-5">
    
    <!-- card 1 -->
        <div class="card" style="width:40%;">
            <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <p id="card-txt2" class="card-text">Some quick example .</p>
            </div>
        </div>

    <!-- card 2 -->
        <div class="card" style="width: 50%;">
            <div class="card-body">
                <h5 class="card-title">Card title</h5>
                <p id="card-api" class="card-text">Some quick example.</p>
            </div>
        </div>
</div>

    <!-- table -->
    <!-- <div class="d-flex align-items-center justify-content-center";>
        
        <table class=" border mt-5">
            <tr >
                <th>Company</th>
                <th>Contact</th>
                <th>Country</th>
            </tr>
            <tr>
                <td>Alfreds </td>
                <td>Maria </td>
                <td>Germany</td>
            </tr>
            <tr>
                <td>Centro  </td>
                <td>Francisco </td>
                <td>Mexico</td>
            </tr>
        </table>

    </div> -->
</body>

<script>

    let btn1=document.getElementById("btn-txt2");

    btn1.addEventListener('click', function(){

        // create  XMLHTTPRequest
        let xhr = new XMLHttpRequest();

        //prepare XMLHttpRequest
        xhr.open('GET',"../Files/jsonData.json",true); 

        // send the request 
        xhr.send(); 

        // process the request
        xhr.onload = ()=>{
            if (xhr.status===200){
                let data=JSON.parse(xhr.responseText);
                displayText(data);
            }
        }
    })

    function displayText(data){

    let card= document.getElementById("card-txt2");

    htmlData="";
    
    for (let i = 0; i < data.length; i++) {
    
        htmlData+=`<ul style="list-style-type:none;">
        
            <li>Id : ${data[i].id}</li>
            <li>Name : ${data[i].name}</li>
            <li>Email : ${data[i].email}</li>
            </ul>
            <hr>
            `
    }

    card.innerHTML=htmlData;    

}

    let btn2=document.getElementById("btn-txt3")

    btn2.addEventListener('click',function(){

        // create arequest
        let xhrr=new XMLHttpRequest();

        // prepare the request
        xhrr.open('GET',"https://jsonplaceholder.typicode.com/users",true);

        // send the request
        xhrr.send();

        // Process the data

        xhrr.onload=()=>{
            if(xhrr.status===200){

                let response_data=JSON.parse(xhrr.responseText);
                displayApiText(response_data);
                
            }
        }


    })

    // function displayApiText(data){

    //     let cardApi=document.getElementById("card-api")

    //     let htmlData=""

    //     for(let i=0;i<3;i++){

    //         htmlData+=`<ul style="list-style-type:none;">

    //             <li>Name : ${data[i].name} </li>
    //             <li>Email : ${data[i].email} </li>
    //             <li>Phone : ${data[i].phone} </li>
    //             <li>Company : ${data[i].company.name} </li>
    //             </ul>
    //             <hr>`
    //     }


    //     cardApi.innerHTML=htmlData;

    // }

    function displayApiText(data) {
    let cardApi = document.getElementById("card-api");

    // Create table 
    let htmlData = `
        <table border="1" cellpadding="5" style="width:100%; text-align:left;">
            <thead style="background-color:#f2f2f2;">
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Company</th>
                </tr>
            </thead>
            <tbody>
    `;

    for (let i = 0; i < 5; i++) {
        htmlData += `
            <tr>
                <td>${data[i].name}</td>
                <td>${data[i].email}</td>
                <td>${data[i].phone}</td>
                <td>${data[i].company.name}</td>
            </tr>
        `;
    }

    // Closing the table after iteration
    htmlData += `
            </tbody>
        </table>
    `;

    cardApi.innerHTML = htmlData;

}


    
</script>

</html>